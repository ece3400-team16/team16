<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Lab 1</title>
    <link rel="shortcut icon" href="favicon-paper-plane.ico" />
    

    <!-- Bootstrap Core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="vendor/simple-line-icons/css/simple-line-icons.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/stylish-portfolio.min.css" rel="stylesheet">

  </head>

  <body id="page-top">

    <!-- Navigation -->
    <a class="menu-toggle rounded" href="#">
      <i class="fas fa-bars"></i>
    </a>
    <nav id="sidebar-wrapper">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-item">
          <a class="js-scroll-trigger" href="index.html#page-top">Home</a>
        </li>
        <li class="sidebar-nav-item">
          <a class="js-scroll-trigger" href="index.html#about">About</a>
        </li>
        <li class="sidebar-nav-item">
          <a class="js-scroll-trigger" href="index.html#milestones">Milestones</a>
        </li>
        <li class="sidebar-nav-item">
          <a class="js-scroll-trigger" href="index.html#labs">Labs</a>
        </li>
      </ul>
    </nav>

    <!-- Header -->
    <header class="masthead d-flex">
      <div class="container text-center my-auto">
        <h1 class="mb-1">Lab 1: Microcontrollers</h1>
        <h3 class="mb-5">
          <em>Baby steps, everyone!</em>
        </h3>
        <a class="btn btn-primary btn-xl js-scroll-trigger" href="#about">Wanna know more?</a>
      </div>
      <div class="overlay"></div>
    </header>

    <section class="content-section">
      <div class="container">
        <h1>Objective</h1>
        <p>This lab allowed us to gain familiarity with basic arduino functionality and setup.  Furthermore, it was the first instance of interfacing the digital and physical in our robot.</p>
        <p>In this lab, digital signals were produced (both on built in and through connect circuitry), analog signals were read and produced, and the robot and servos were assembled and driven for the first time.</p>
        <h1>Procedure</h1>
        <p>We split into 2 groups.  Luke and Orby worked on the arduino testing sections of the lab and Orrin worked on building the robot.  Once the robot was ready to be programed to move, Caitlin and Orby worked on the circuitry for the servos, Labhansh and Luke worked on the code.</p>
      </div>
    </section>

    <!-- Milestones -->
    <section class="content-section bg-primary text-white text-center" id="milestones">
      <div class="container">
        <div class="content-section-heading">
          <h2 class="mb-5">Let's Break it Down</h2>
        </div>
        <div class="row">
            <div class="col-lg-3 col-md-6 mb-5 mb-lg-0">
              <a href="#understanding_arduinos" class="text-white text-center js-scroll-trigger">
              <span class="service-icon rounded-circle mx-auto mb-3">
                <i class="far fa-lightbulb"></i>
              </span>
              <h4>
                <strong>Understanding Arduinos</strong>
              </h4>
              <p class="text-faded mb-0"></p>
            </a>
            </div>
          <div class="col-lg-3 col-md-6 mb-5 mb-lg-0">
            <a href="#analyzing_potentiometers" class="text-white text-center js-scroll-trigger">
              <span class="service-icon rounded-circle mx-auto mb-3">
                <i class="fas fa-screwdriver"></i>
              </span>
              <h4>
                <strong>Analyzing Potentiometers</strong>
              </h4>
              <p class="text-faded mb-0"></p>
            </a>
          </div>
          <div class="col-lg-3 col-md-6 mb-5 mb-md-0">
            <a href="#assembling_arduino" class="text-white text-center js-scroll-trigger">
              <span class="service-icon rounded-circle mx-auto mb-3">
                <i class="fas fa-toolbox"></i>
              </span>
              <h4>
                <strong>Assembling Arduino Schwarzenegger</strong>
              </h4>
              <p class="text-faded mb-0"></p>
            </a>
          </div>
          <div class="col-lg-3 col-md-6">
            <a href="#learning_to_drive" class="text-white text-center js-scroll-trigger">
              <span class="service-icon rounded-circle mx-auto mb-3">
                <i class="fas fa-car-crash"></i>
              </span>
              <h4>
                <strong>Learning to Drive</strong>
              </h4>
              <p class="text-faded mb-0"></p>
            </a>
          </div>
        </div>
      </div>
    </section>

    <section class="content-section" id="understanding_arduinos">
      <div class="container">
        <h1>Understanding Arduinos</h1>
        <h2>Blinking an internal LED</h2>
        <p>We used the 'Blink' sketch that came with the Arduino IDE in order to make the LED on the Arduino Uno blink. We found the Blink sketch in File > Examples > 1. Basics > Blink. The code for that skecth is below:</p>
        <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #888888">//the setup function runs once when you press reset or power the board</span>
        <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">setup</span>() {
          pinMode(<span style="color: #0000DD; font-weight: bold">LED_BUILTIN</span>, OUTPUT);      <span style="color: #888888">// initialize internal LED pin as an output.</span>
        }

        <span style="color: #888888">// the loop function runs over and over again forever</span>
        <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">loop</span>() {
          digitalWrite(<span style="color: #0000DD; font-weight: bold">LED_BUILTIN</span>, HIGH);   <span style="color: #888888">// turn LED on by making voltage HIGH</span>
          delay(<span style="color: #0000DD; font-weight: bold">1000</span>);             <span style="color: #888888">// wait for a second</span>
          digitalWrite(<span style="color: #0000DD; font-weight: bold">LED_BUILTIN</span>, LOW);    <span style="color: #888888">// turn LED off by making the voltage LOW</span>
          delay(<span style="color: #0000DD; font-weight: bold">1000</span>);             <span style="color: #888888">// wait for a second</span>
        }
        </pre></div>
        <p>Below is a video of the Internal LED blinking.</p>
        <iframe width="560" height="315" src="https://www.youtube.com/embed/pjT26VxNAp4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        <h2>Blinking an external LED</h2>
        <p>In order for the 'Blink' code to work with an external LED, we replaced all occurrences of LED_BUILTIN in the original code with 0 which was the number of the digital pin we chose to write to.</p>
        <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #888888">//the setup function runs once when you press reset or power the board</span>
        <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">setup</span>() {
          pinMode(<span style="color: #0000DD; font-weight: bold">0</span>, OUTPUT);      <span style="color: #888888">// initialize digital pin 0 as an output.</span>
        }

        <span style="color: #888888">// the loop function runs over and over again forever</span>
        <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">loop</span>() {
          digitalWrite(<span style="color: #0000DD; font-weight: bold">0</span>, HIGH);   <span style="color: #888888">// turn LED on by making voltage HIGH</span>
          delay(<span style="color: #0000DD; font-weight: bold">1000</span>);             <span style="color: #888888">// wait for a second</span>
          digitalWrite(<span style="color: #0000DD; font-weight: bold">0</span>, LOW);    <span style="color: #888888">// turn LED off by making the voltage LOW</span>
          delay(<span style="color: #0000DD; font-weight: bold">1000</span>);             <span style="color: #888888">// wait for a second</span>
        }
        </pre></div>

        <p>Below is a video of the external LED blinking:</p>
        <iframe width="560" height="315" src="https://www.youtube.com/embed/HGZolIZSZxk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        <p>We repeated this procedure for all the other digital pins on the board to ensure that they worked.</p>
        <i>Note: For this part, we connected a 300Ω resistor in series with everything we connected to a pin.</i>
      </div>
    </section>

    <section id="analyzing_potentiometers" class="content-section bg-primary text-white">
      <div class="container">
        <h1>Analyzing Potentiometers</h1>
        <h2>Reading the value of a potentiometer via the serial port</h2>
        <p>We connected the potentiometer to the Arduino Uno (using the circuit diagram shown below) as shown below:</p>
        <div class="row no-gutters">
          <div class="col-lg-6">
            <a class="portfolio-item">
              <img class="img-fluid" src="img/lab1/pot_serial_port_diagram.jpg" alt="">
            </a>
          </div>
          <div class="col-lg-6">
            <a class="portfolio-item">
              <img class="img-fluid" src="img/lab1/pot_serial_port.jpg" alt="">
            </a>
          </div>
        </div>
        <p>We then wrote code to initialise the serial connection (to enable us to print the analogue output to the serial port). We noticed that the value of the analogue output was between 0 and 1023 but we wanted the range to be 0 - 5 so we multiplied the value of the analogue output by 5/1023 which was 0.0049. We programmed it to print a value to the serial port every half second.</p>
        <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #333399; font-weight: bold">int</span> analogPin <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">1</span>;     <span style="color: #888888">// potentiometer wiper (middle terminal) connected to analog pin 1</span>
                               <span style="color: #888888">// outside leads to ground and +5V</span>
        <span style="color: #333399; font-weight: bold">int</span> val <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>;           <span style="color: #888888">// variable to store the value read</span>

        <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">setup</span>()
        {
          Serial.begin(<span style="color: #0000DD; font-weight: bold">9600</span>);              <span style="color: #888888">//  setup serial</span>
        }

        <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">loop</span>()
        {
          val <span style="color: #333333">=</span> analogRead(analogPin);     <span style="color: #888888">// read the input pin</span>
          Serial.println(val<span style="color: #333333">*</span><span style="color: #6600EE; font-weight: bold">.0049</span>);       <span style="color: #888888">// debug value </span>
          delay(<span style="color: #0000DD; font-weight: bold">500</span>);                      <span style="color: #888888">// delay half-second</span>
        }
        </pre></div>
        <p>Below is a video of the analogue output being read by the serial monitor:</p>
        <iframe width="560" height="315" src="https://www.youtube.com/embed/o0OMjP_WKFw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        <h2>Mapping the value of potentiometer to the LED</h2>
        <p>This is a simple extension of the above code for reading a potentiometer value.  Notice that only one line was added at the end of the program: <code>analogWrite(ledPin, map(val, 0, 1023, 0, 255));</code>.  The Arduino analogWrite reference page states that the write value must be between 0 and 255.  Thus, we wrote this line that maps the potentiometer value to the necessary parameters (0 to 255), and writes this value to the LED pin.  See the full code below:</p>
        <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #333399; font-weight: bold">int</span> ledPin <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">11</span>;
        <span style="color: #333399; font-weight: bold">int</span> analogPin <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">5</span>;     <span style="color: #888888">// potentiometer wiper (middle terminal) connected to analog pin 5</span>
                               <span style="color: #888888">// outside leads to ground and +5V</span>
        <span style="color: #333399; font-weight: bold">int</span> val <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">0</span>;           <span style="color: #888888">// variable to store the value read</span>

        <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">setup</span>()
        {
          Serial.begin(<span style="color: #0000DD; font-weight: bold">9600</span>);              <span style="color: #888888">//  setup serial</span>
        }

        <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">loop</span>()
        {
          val <span style="color: #333333">=</span> analogRead(analogPin);     <span style="color: #888888">// read the input pin</span>
          Serial.println(val<span style="color: #333333">*</span><span style="color: #6600EE; font-weight: bold">.0049</span>);       <span style="color: #888888">// debug value</span>
          delay(<span style="color: #0000DD; font-weight: bold">500</span>);                      <span style="color: #888888">// delay half-second</span>
          analogWrite(ledPin, map(val, <span style="color: #0000DD; font-weight: bold">0</span>, <span style="color: #0000DD; font-weight: bold">1023</span>, <span style="color: #0000DD; font-weight: bold">0</span>, <span style="color: #0000DD; font-weight: bold">255</span>));
        }
        </pre></div>

        <p>And below is a video demonstrating LED brightness controlled by potentiometer:</p>
        <iframe width="560" height="315" src="https://www.youtube.com/embed/CL8IxNHL1qE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        <h2>Mapping the value of potentiometer to the servo</h2>
        <p>Here, we want to be able to turn the potentiometer to control the direction and speed of the servo.  Recall that the servo can be given values 0-180, where 0 is its fastest clockwise speed, 180 is the fastest counter-clockwise speed, and 91 is stationary.</p>
        <p>We simply had to change the mapping line from 0-255 to 0-180.  Notice in the video below that, while spinning the potentiometer from its one extreme to the other, the servo approaches its stationary point; it slows down, stops, and then starts spinning again in the opposite direction.</p>
        <p>See below for a video demonstrating servo speed/direction controlled by potentiometer:</p>
        <iframe width="560" height="315" src="https://www.youtube.com/embed/R8Fg_MfGP-w" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
      </div>
    </section>

    <section id="assembling_arduino" class="content-section">
      <div class="container">
        <h1>Assembling Arduino Schwarzenegger</h1>
        <p>Our robot was assembled in the classic “tri-pod” design with 2 wheels (attached to servos) and a ball bearing.  The electronic hardware was stored on the top of the central chassis.</p>
        <p>We used:</p>
        <ul>
          <li>1 robot base (the large red platform in the image)</li>
          <li>2 servo mounts</li>
          <li>2 continuous rotation servos</li>
          <li>2 wheels</li>
          <li>1 Arduino Uno</li>
          <li>1 power source</li>
          <li>1 breadboard</li>
          <li>Various wires, screws, nuts, and spacers</li>
        </ul>
        <p>Once the first robot worked as required (moved in square), we changed the chassis to one where screwing down the 3 major components (Arduino board, bread board, power source), was possible.  We will likely continue to alter the setup, however right now, balance was desired.</p>
        <div class="row no-gutters">
          <div class="col-lg-6">
            <a class="portfolio-item" href="#">
              <img class="img-fluid" src="img/lab1/arduino_robot.jpg" alt="">
            </a>
          </div>
        </div>
      </div>
    </section>

    <section id="learning_to_drive" class="content-section bg-primary text-white">
      <div class="container">
        <h1>Learning to Drive</h1>
        <p>We looked up the library code for servos to determine how to make the robot move.  We programed functions for each wheel after determining what speed we wanted.  We then wrote a code that would move it in a square continuously whenever power was on.  Here is our code.</p>
        <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #557799">#include &lt;Servo.h&gt;</span>
                               <span style="color: #888888">// outside leads to ground and +5V</span>
        Servo leftWheel, rightWheel;
        <span style="color: #333399; font-weight: bold">int</span> leftWheelPin <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">10</span>, rightWheelPin <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">11</span>;
        <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">setup</span>()
        {
          leftWheel.attach(leftWheelPin);
          rightWheel.attach(rightWheelPin);
          leftWheel.write(<span style="color: #0000DD; font-weight: bold">90</span>);
          rightWheel.write(<span style="color: #0000DD; font-weight: bold">90</span>);
        }

        <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">moveLeftWheelAntiClockwise</span>()
        {
          leftWheel.write(<span style="color: #0000DD; font-weight: bold">120</span>);
        }

        <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">moveLeftWheelClockwise</span>()
        {
          leftWheel.write(<span style="color: #0000DD; font-weight: bold">60</span>);
        }

        <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">moveRightWheelAntiClockwise</span>()
        {
          rightWheel.write(<span style="color: #0000DD; font-weight: bold">120</span>);
        }

        <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">moveRightWheelClockwise</span>()
        {
          rightWheel.write(<span style="color: #0000DD; font-weight: bold">60</span>);
        }

        <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">forward</span>(<span style="color: #333399; font-weight: bold">int</span> steps)
        {
          <span style="color: #008800; font-weight: bold">for</span>(<span style="color: #333399; font-weight: bold">int</span> i<span style="color: #333333">=</span><span style="color: #0000DD; font-weight: bold">0</span>;i<span style="color: #333333">&lt;</span>steps;i<span style="color: #333333">++</span>)
          {
            moveLeftWheelAntiClockwise();
            moveRightWheelClockwise();
          }  
        }

        <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">reverse</span>(<span style="color: #333399; font-weight: bold">int</span> steps)
        {
          <span style="color: #008800; font-weight: bold">for</span>(<span style="color: #333399; font-weight: bold">int</span> i<span style="color: #333333">=</span><span style="color: #0000DD; font-weight: bold">0</span>;i<span style="color: #333333">&lt;</span>steps;i<span style="color: #333333">++</span>)
          {
            moveLeftWheelClockwise();
            moveRightWheelAntiClockwise();
          }  
        }

        <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">stopRight</span>()
        {
          rightWheel.write(<span style="color: #0000DD; font-weight: bold">90</span>);
        }

        <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">stopLeft</span>()
        {
          leftWheel.write(<span style="color: #0000DD; font-weight: bold">90</span>);
        }

        <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">left</span>()
        {
          <span style="color: #008800; font-weight: bold">for</span>(<span style="color: #333399; font-weight: bold">int</span> i<span style="color: #333333">=</span><span style="color: #0000DD; font-weight: bold">0</span>;i<span style="color: #333333">&lt;</span><span style="color: #0000DD; font-weight: bold">10</span>;i<span style="color: #333333">++</span>)
          {
            moveLeftWheelAntiClockwise();
          }  
        }

        <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">right</span>()
        {
          <span style="color: #008800; font-weight: bold">for</span>(<span style="color: #333399; font-weight: bold">int</span> i<span style="color: #333333">=</span><span style="color: #0000DD; font-weight: bold">0</span>;i<span style="color: #333333">&lt;</span><span style="color: #0000DD; font-weight: bold">10</span>;i<span style="color: #333333">++</span>)
          {
            moveRightWheelClockwise();
          }  
        }


        <span style="color: #333399; font-weight: bold">void</span> <span style="color: #0066BB; font-weight: bold">loop</span>()
        {
          
          forward(<span style="color: #0000DD; font-weight: bold">10</span>);
          delay(<span style="color: #0000DD; font-weight: bold">3000</span>);
          stopLeft();
          delay(<span style="color: #0000DD; font-weight: bold">900</span>);
          
        }
        </pre></div>

        <p>And here is it moving:</p>
        <iframe width="560" height="315" src="https://www.youtube.com/embed/CHw4wVF8Cv8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
      </div>
    </section>

    <!-- Map -->
    <!-- POINT TO PHILLIPS -->
    <section id="contact" class="map">
      <iframe width="100%" height="100%" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?q=phillips%20hall%2C%20ithaca&t=&z=13&ie=UTF8&iwloc=&output=embed"></iframe>
      <br/>
      <small>
        <a href="https://www.google.com/maps/place/Phillips+Hall/@42.4445807,-76.4842416,17z/data=!4m7!3m6!1s0x89d0818c816cffe3:0xfd9ee07ff22c5aa4!8m2!3d42.4445768!4d-76.4820529!9m1!1b1"></a>
      </small>
    </section>

    <!-- Footer -->
    <footer class="footer text-center">
      <div class="container">
        <ul class="list-inline mb-5">
          <li class="list-inline-item">
            <a class="social-link rounded-circle text-white" href="https://github.com/ece3400-team16">
              <i class="icon-social-github"></i>
            </a>
          </li>
        </ul>
        <p class="text-muted small mb-0">Copyright &copy; ECE 3400 2018</p>
      </div>
    </footer>

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded js-scroll-trigger" href="#page-top">
      <i class="fas fa-angle-up"></i>
    </a>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/stylish-portfolio.min.js"></script>

  </body>

</html>
